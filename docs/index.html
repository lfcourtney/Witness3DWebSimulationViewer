<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>witness3dwebsimulationviewer</title><meta name="description" content="Documentation for witness3dwebsimulationviewer"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">witness3dwebsimulationviewer</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>witness3dwebsimulationviewer</h1></div><div class="tsd-panel tsd-typography"><h1 id="witness3dwebsimulationviewer" class="tsd-anchor-link">Witness3DWebSimulationViewer<a href="#witness3dwebsimulationviewer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="overview" class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Witness 3D Web Simulation Viewer is a 3D web app that can show simulations running over time.</p>
<p>The simulations will come from <a href="https://www.lanner.com/en-gb/technology/witness-simulation-software.html">Witness</a>. Witness is a discrete event simulation modelling environment allowing domain experts to create simulation models of systems. Witness runs on Windows desktop. Witness has an option to create a 3D view from positional information in the 2D view. From the 3D visualisations in Witness, a detailed simulation trace output can be captured that describes all the 3D movements in the simulation over time.</p>
<p>The project is to use the simulation trace output to visualise these simulations running in 3D on the web. Because such visualisation capabilities come built into Witness, this project is a proof-of-concept demonstrating how feasible it is to shift these visualisation capabilities onto the browser and, through this, identify the costs and potential limitations.</p>
<p>By shifting the visualisation of simulations onto the browser, the intended benefit is to access opportunities for real-time collaboration by visualising the simulation from the same trace output file; the ability to visualise simulations will no longer be restricted to Windows desktops with an installation of Witness.</p>
<p>There are different approaches that can be taken to achieve these aims (eg, WebGL vs. WebGPU). The project will compare the different approaches and justify the approaches it takes.</p>
<p><strong>Demonstration of Witness Desktop 3D Visualisation Capabilities</strong>
<img src="media/demonstration_of_witness_desktop_3d_visualisation_capabilities.gif" alt="Demonstration of Witness Desktop 3D Visualisation Capabilities" title="Demonstration of Witness Desktop 3D Visualisation Capabilities"></p>
<p><strong>Use Case Diagram</strong>
<img src="media/witness_3d_web_simulation_viewer_uml_use_case_diagram.png" alt="Witness 3D Web Simulation Viewer Use Case Diagram" title="Witness 3D Web Simulation Viewer Use Case Diagram"></p>
<p><strong>Note</strong>: <code>.w3d</code> is the official filename extension of simulation trace output files generated from the main Witness application. Any files uploaded to Witness 3D Web Simulation Viewer for processing without this filename extension will immediately be rejected. Furthermore, such file must contain the expected XML format, relaying the simulation events through the core &lt;create&gt;, &lt;update&gt; and &lt;delete&gt; commands. An error will be thrown if Witness 3D Web Simulation Viewer is unable to parse the uploaded <code>.w3d</code> file following the expected XML structure. Reference to the expected XML format can be found in <a href="./WitnessDocs/Witness%20W3D%20Queue%20Implementation.pdf">Witness W3D Queue Implementation</a> and <a href="./WitnessDocs/WITNESS-Unity%20Proof%20of%20Concept%2001.pdf">WITNESS-Unity Proof of Concept 01</a>.</p>
<p><strong>Package Diagram</strong>
<img src="media/witness_3d_web_simulation_viewer_uml_package_diagram.png" alt="Witness 3D Web Simulation Viewer Package Diagram" title="Witness 3D Web Simulation Viewer Package Diagram"></p>
<p><strong>Class Diagram</strong>
<img src="media/witness_3d_web_simulation_viewer_uml_class_diagram.png" alt="Witness 3D Web Simulation Viewer Class Diagram" title="Witness 3D Web Simulation Viewer Class Diagram"></p>
<h2 id="technologies" class="tsd-anchor-link">Technologies<a href="#technologies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Babylon.js, Vite and TypeScript will be used to create the web application. Creating a Babylon.js web application using a Vite development environment is an established approach with an official <a href="https://doc.babylonjs.com/guidedLearning/usingVite">page</a> on the Babylon.js documentation. An important advantage is that, unlike other module bundlers for JavaScript such as Webpack, Vite is able to reflect changes made to the source code immediately; unlike Webpack, it does not need to compile all the files into a JavaScript bundle before the web app hosted on the development server can reflect the new changes. This makes development quicker with Vite. Furthermore, Vite has fewer config files than its competitors, such as Webpack, and is therefore easier to maintain.</p>
<p>Run on a browser with native WebGPU support, such as Google Chrome, Witness 3D Web Simulation Viewer will automatically detect such compatibility and respond by initialising Babylon.js using the <a href="https://doc.babylonjs.com/typedoc/classes/BABYLON.WebGPUEngine">WebGPUEngine</a> class. Run on a non-compatible browser and Witness 3D Web Simulation Viewer will intialise Babylon.js using the standard <a href="https://doc.babylonjs.com/typedoc/classes/BABYLON.Engine">Engine</a> class, which uses WebGL2 rather than the newer WebGPU JavaScript API.</p>
<p>(<strong>Note</strong>: As described in the official documentation, full Babylon.js support with WebGPU is still a work in progress, and, as a result, Witness 3D Web Simulation Viewer is more likely to encounter errors when using the WebGPU engine. Babylon.js aims to achieve full feature parity with WebGPU by version 5).</p>
<h1 id="getting-started" class="tsd-anchor-link">Getting Started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="prerequisites" class="tsd-anchor-link">Prerequisites<a href="#prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Clone the GitHub repo, and run <code>npm i</code> (short for install) to install Babylon.js, Vite and the other npm dependencies.</li>
<li>Immediately after installing the necessary Node.js packages, run <code>npm up</code> (short for update). Based on the configuration in <code>package.json</code>, this will update the node packages to all future minor and patch versions, ensuring that the latest versions are used without breaking compatibility. From time to time, this command should be run to minimise the chance of bugs and security vulnerabilities.</li>
<li>Run <code>npm run dev</code> to begin a development server running the code. The server will begin on port <code>4000</code>.</li>
<li>To stop the server, go back to the terminal and press Ctrl+C.</li>
</ul>
<h2 id="installing" class="tsd-anchor-link">Installing<a href="#installing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Run <code>npm run build</code>. This will bundle the application, outputting this bundle to the <code>dist</code> folder within the root directory, creating this directory if it does not already exist.</li>
<li>Run <code>npm run preview</code> to see the exported code bundle running in a local development server.</li>
<li>Now the contents of the <code>dist</code> folder can be uploaded to an external server, deploying the application.</li>
</ul>
<h2 id="husky-pre-commit-hook" class="tsd-anchor-link">Husky pre-commit hook<a href="#husky-pre-commit-hook" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>.husky\pre-commit</code> contains the contents of a pre-commit Git hook as per the <a href="https://typicode.github.io/husky/">Husky</a> standard. This script will thus run each time you run <code>git commit</code>. Along with linting staged files to enforce code style, the script will run a Node.js script to automatically update the patch version number as held within <code>package.json</code>. Such updated <code>package.json</code> file will automatically be added to the outgoing commit.</p>
<p>The <code>--no-verify</code> (shortened to -n) Git commit flag can bypass the pre-commit hook. Therefore, run <code>git commit -n</code> to make a commit without updating the version number. <strong>Important</strong>: this should be used sparingly, only for commits involving very trivial changes.</p>
<h2 id="debug" class="tsd-anchor-link">Debug<a href="#debug" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Witness 3D Web Simulation Viewer is developed and debugged in Visual Studio Code. It is recommended to use Visual Studio Code for debugging due to its built-in debugging capabilities.</p>
<p>To do open a debugging environment in Visual Studio Code, open a <code>JavaScript Debug Terminal</code> and run <code>npm run dev</code> to begin the development server as usual. From here, the application will stop at any breakpoints set in Visual Studio Code.</p>
<p>Alternatively, many web browsers offer debugging capabilities that can be used for debugging Witness 3D Web Simulation Viewer.</p>
<h1 id="running-the-tests" class="tsd-anchor-link">Running the tests<a href="#running-the-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Witness 3D Web Simulation Viewer uses the Vitest testing library, created by the same team as the Vite build tool and comes with Vite integration, to create unit tests.</p>
<p>Test configuration is located in the <code>vitest.config.ts</code> file, which is also where the Vite configuration is located.</p>
<h2 id="run-tests" class="tsd-anchor-link">Run Tests<a href="#run-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Run <code>npm test</code>. This will initiate a single run of the unit tests.</li>
</ul>
<h2 id="code-coverage" class="tsd-anchor-link">Code Coverage<a href="#code-coverage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A successful test run will produce code coverage. The directory for code coverage is <code>coverage</code>, which is ignored by Git.</p>
<h2 id="debug-tests" class="tsd-anchor-link">Debug Tests<a href="#debug-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A run of Vitest unit tests can be debugged in VS Code. To do this, open a <code>JavaScript Debug Terminal</code> and run <code>npm run test</code>. For more information, go to the Vitest <a href="https://vitest.dev/guide/debugging">official documentation</a>.</p>
<h1 id="quick3d-models" class="tsd-anchor-link">Quick3D Models<a href="#quick3d-models" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>As Witness 3D Web Simulation Viewer is a prototype, its compatibility is limited, and, in this instance, its visualisation capabilities is limited to two trace output files <code>Quick3D.w3d</code> and <code>Quick3D-Large.w3d</code>, both of which are found within <code>./WitnessModels</code>.</p>
<p><code>Quick3D.w3d</code> is the simulation trace output file that was used during the development of Witness 3D Web Simulation Viewer, and for this reason, compatibility is guaranteed. It represents the Quick3D trace file capture of running the <code>Quick3D.mod</code> simulation model (also found within <code>./WitnessModels</code>) for 200 minutes. Once those 200 minutes are up, the various parts and labour elements will be deleted.</p>
<p><code>Quick3D-Large.w3d</code> represents the Quick3D trace file capture of running the <code>Quick3D-Large.mod</code> simulation model also for 200 minutes, a scaled-up version of the <code>Quick3D.mod</code> simulation model. To test the scalability of the Quick3D function in Witness and note the differences in performance, the <code>Quick3D-Large.w3d</code> simulation model consists of 12 separate instances of the original <code>Quick3D.mod</code> simulation model running simultaneously. Thus, its corresponding simulation trace output file can be uploaded to Witness 3D Web Simulation Viewer for similar purposes: to test the performance capabilities of the application knowing that it already has compatibility of the original <code>Quick3D.w3d</code> is the simulation trace output file. Likewise, it will delete all of the parts and labour elements in the simulation when 200 minutes (in the simulation) have passed.</p>
<p>Further information on the difference in performance between the <code>Quick3D.mod</code> simulation model and the scaled up equivalent <code>Quick3D-Large.mod</code> can be found in the <em>witness-dev-witness-unity-spike</em> document linked to below.</p>
<h1 id="important-links--docs" class="tsd-anchor-link">Important Links &amp; Docs<a href="#important-links--docs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li><a href="./WitnessDocs/3D%20Command%20Reference%2021.pdf">3D Command Reference 21</a></li>
<li><a href="./WitnessDocs/Part%20Queuing%20Positions%20Overview%2001.pdf">Part Queuing Positions Overview 01</a></li>
<li><a href="./WitnessDocs/The%20WebGPU%20Sourcebook.pdf">The WebGPU Sourcebook</a></li>
<li><a href="./WitnessDocs/Witness%20W3D%20Queue%20Implementation.pdf">Witness W3D Queue Implementation</a></li>
<li><a href="media/witness-dev-witness14-3D.pdf">witness-dev-witness14-3D</a></li>
<li><a href="media/witness-dev-witness-unity-spike.pdf">witness-dev-witness-unity-spike</a></li>
<li><a href="./WitnessDocs/WITNESS-Unity%20Proof%20of%20Concept%2001.pdf">WITNESS-Unity Proof of Concept 01</a></li>
</ul>
<h2 id="witness-team-user-testimonial-11-march-2025" class="tsd-anchor-link">Witness Team User Testimonial (11 March 2025)<a href="#witness-team-user-testimonial-11-march-2025" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Evidence of the success of Witness 3D Web Simulation Viewer was provided on the 11th of March 2025 in the form of a user testimonial document from the Witness team. <a href="./WitnessDocs/Witness%203D%20Web%20Simulation%20Viewer%20Feedback.pdf">(Witness 3D Web Simulation Viewer Feedback)</a>. This document describes how the deliverable was demonstrated to the simulation group of 40 people and concludes that the deliverable gives the Witness team the confidence that they &quot;can utilize a web visualization technology such as WebGPU, using a library like Babylon js, to extend the reach of dynamic 3D simulation visualization beyond the desktop.&quot;</p>
<h1 id="last-updated" class="tsd-anchor-link">Last Updated<a href="#last-updated" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This README was last updated on 21 April 2025.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#witness3dwebsimulationviewer"><span>Witness3DWeb<wbr/>Simulation<wbr/>Viewer</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#technologies"><span>Technologies</span></a></li></ul><a href="#getting-started"><span>Getting <wbr/>Started</span></a><ul><li><a href="#prerequisites"><span>Prerequisites</span></a></li><li><a href="#installing"><span>Installing</span></a></li><li><a href="#husky-pre-commit-hook"><span>Husky pre-<wbr/>commit hook</span></a></li><li><a href="#debug"><span>Debug</span></a></li></ul><a href="#running-the-tests"><span>Running the tests</span></a><ul><li><a href="#run-tests"><span>Run <wbr/>Tests</span></a></li><li><a href="#code-coverage"><span>Code <wbr/>Coverage</span></a></li><li><a href="#debug-tests"><span>Debug <wbr/>Tests</span></a></li></ul><a href="#quick3d-models"><span>Quick3<wbr/>D <wbr/>Models</span></a><a href="#important-links--docs"><span>Important <wbr/>Links &amp; <wbr/>Docs</span></a><ul><li><a href="#witness-team-user-testimonial-11-march-2025"><span>Witness <wbr/>Team <wbr/>User <wbr/>Testimonial (11 <wbr/>March 2025)</span></a></li></ul><a href="#last-updated"><span>Last <wbr/>Updated</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">witness3dwebsimulationviewer</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
